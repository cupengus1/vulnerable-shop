# ğŸ›ï¸ Vulnerable Shop - E-commerce Website vá»›i Lá»— Há»•ng Báº£o Máº­t

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![PHP Version](https://img.shields.io/badge/PHP-7.4%2B-blue.svg)](https://www.php.net/)
[![MySQL](https://img.shields.io/badge/MySQL-5.7%2B-orange.svg)](https://www.mysql.com/)

> âš ï¸ **Cáº¢NH BÃO Báº¢O Máº¬T**: Website nÃ y Ä‘Æ°á»£c thiáº¿t káº¿ vá»›i cÃ¡c lá»— há»•ng báº£o máº­t cÃ³ chá»§ Ä‘Ã­ch Ä‘á»ƒ phá»¥c vá»¥ má»¥c Ä‘Ã­ch há»c táº­p vÃ  nghiÃªn cá»©u. **KHÃ”NG ÄÆ¯á»¢C** triá»ƒn khai lÃªn mÃ´i trÆ°á»ng production hoáº·c sá»­ dá»¥ng code nÃ y cho á»©ng dá»¥ng thá»±c táº¿!

## ğŸ“‹ Má»¥c Lá»¥c

- [Giá»›i Thiá»‡u](#-giá»›i-thiá»‡u)
- [TÃ­nh NÄƒng](#-tÃ­nh-nÄƒng)
- [Lá»— Há»•ng Báº£o Máº­t](#-lá»—-há»•ng-báº£o-máº­t)
- [YÃªu Cáº§u Há»‡ Thá»‘ng](#-yÃªu-cáº§u-há»‡-thá»‘ng)
- [CÃ i Äáº·t](#-cÃ i-Ä‘áº·t)
- [HÆ°á»›ng Dáº«n Sá»­ Dá»¥ng](#-hÆ°á»›ng-dáº«n-sá»­-dá»¥ng)
- [TÃ i Khoáº£n Máº·c Äá»‹nh](#-tÃ i-khoáº£n-máº·c-Ä‘á»‹nh)
- [Cáº¥u TrÃºc Dá»± Ãn](#-cáº¥u-trÃºc-dá»±-Ã¡n)
- [Demo Khai ThÃ¡c](#-demo-khai-thÃ¡c)
- [License](#-license)

## ğŸ¯ Giá»›i Thiá»‡u

**Vulnerable Shop** lÃ  má»™t website thÆ°Æ¡ng máº¡i Ä‘iá»‡n tá»­ bÃ¡n quáº§n Ã¡o Ä‘Æ°á»£c xÃ¢y dá»±ng vá»›i má»¥c Ä‘Ã­ch **giÃ¡o dá»¥c** trong lÄ©nh vá»±c An toÃ n ThÃ´ng tin. Dá»± Ã¡n nÃ y tÃ­ch há»£p cÃ¡c lá»— há»•ng báº£o máº­t phá»• biáº¿n Ä‘á»ƒ sinh viÃªn, há»c viÃªn vÃ  cÃ¡c chuyÃªn gia báº£o máº­t cÃ³ thá»ƒ:

- ğŸ“ Há»c cÃ¡ch nháº­n diá»‡n cÃ¡c lá»— há»•ng báº£o máº­t
- ğŸ” Thá»±c hÃ nh ká»¹ thuáº­t penetration testing
- ğŸ›¡ï¸ Hiá»ƒu cÃ¡ch kháº¯c phá»¥c cÃ¡c lá»— há»•ng
- ğŸ“š NghiÃªn cá»©u vá» Web Application Security

## âœ¨ TÃ­nh NÄƒng

### Chá»©c nÄƒng ngÆ°á»i dÃ¹ng (User)
- âœ… ÄÄƒng kÃ½ tÃ i khoáº£n vÃ  Ä‘Äƒng nháº­p
- âœ… Xem danh sÃ¡ch sáº£n pháº©m theo danh má»¥c
- âœ… TÃ¬m kiáº¿m sáº£n pháº©m
- âœ… Xem chi tiáº¿t sáº£n pháº©m
- âœ… ÄÃ¡nh giÃ¡ sáº£n pháº©m (Rating & Comment)
- âœ… ThÃªm sáº£n pháº©m vÃ o giá» hÃ ng
- âœ… Quáº£n lÃ½ giá» hÃ ng (thÃªm, xÃ³a, cáº­p nháº­t sá»‘ lÆ°á»£ng)
- âœ… Äáº·t hÃ ng vÃ  thanh toÃ¡n (COD)
- âœ… Xem lá»‹ch sá»­ Ä‘Æ¡n hÃ ng
- âœ… Xem chi tiáº¿t Ä‘Æ¡n hÃ ng

### Chá»©c nÄƒng quáº£n trá»‹ (Admin)
- âœ… Quáº£n lÃ½ sáº£n pháº©m (CRUD)
- âœ… Xem danh sÃ¡ch Ä‘Æ¡n hÃ ng
- âœ… Cáº­p nháº­t tráº¡ng thÃ¡i Ä‘Æ¡n hÃ ng

## ğŸ”“ Lá»— Há»•ng Báº£o Máº­t

Dá»± Ã¡n táº­p trung vÃ o **6 lá»— há»•ng báº£o máº­t chÃ­nh** Ä‘Æ°á»£c thiáº¿t káº¿ Ä‘á»ƒ há»c táº­p vÃ  nghiÃªn cá»©u. 

ğŸ“š **TÃ i liá»‡u liÃªn quan**:
- [VULNERABILITIES.md](VULNERABILITIES.md) - Chi tiáº¿t cÃ¡c lá»— há»•ng vÃ  cÃ¡ch khai thÃ¡c
- [SECURITY_FIXES.md](SECURITY_FIXES.md) - HÆ°á»›ng dáº«n kháº¯c phá»¥c tá»«ng lá»— há»•ng

### ğŸ“‹ Tá»•ng Quan 6 Lá»— Há»•ng

| # | Chá»©c nÄƒng | Lá»— há»•ng | Má»©c Ä‘á»™ | File |
|---|-----------|---------|--------|------|
| 1 | ÄÄƒng kÃ½ - ÄÄƒng nháº­p | Brute Force, SQL Injection, Plaintext Password | ğŸ”´ Critical | `login.php`, `register.php` |
| 2 | TÃ¬m kiáº¿m sáº£n pháº©m | SQL Injection | ğŸ”´ Critical | `products.php` |
| 3 | Quáº£n lÃ½ Ä‘Æ¡n hÃ ng | IDOR | ğŸŸ  High | `order_detail.php` |
| 4 | Quáº£n lÃ½ sáº£n pháº©m | Data Validation Issues | ğŸŸ¡ Medium | `admin/products_manage.php` |
| 5 | ÄÃ¡nh giÃ¡ sáº£n pháº©m | Stored XSS, User Enumeration | ğŸ”´ Critical | `product_detail.php` |
| 6 | ToÃ n há»‡ thá»‘ng | Denial of Service (DoS) | ğŸŸ  High | `products.php`, `dos_test.php` |

---

### ğŸ” 1. Lá»— Há»•ng ÄÄƒng KÃ½ - ÄÄƒng Nháº­p

**Chá»©c nÄƒng**: ÄÄƒng kÃ½ tÃ i khoáº£n vÃ  Ä‘Äƒng nháº­p há»‡ thá»‘ng  
**Files**: `login.php`, `register.php`

#### Rá»§i ro A: Brute Force Attack ğŸ”¨
- âŒ KhÃ´ng cÃ³ rate limiting
- âŒ KhÃ´ng cÃ³ CAPTCHA  
- âŒ KhÃ´ng khÃ³a tÃ i khoáº£n sau N láº§n sai
- **Impact**: Chiáº¿m quyá»n tÃ i khoáº£n, ká»ƒ cáº£ admin

#### Rá»§i ro B: SQL Injection trong Login
- âŒ Input khÃ´ng Ä‘Æ°á»£c sanitize
- âŒ KhÃ´ng dÃ¹ng Prepared Statements
- **Payload máº«u**: `admin' OR '1'='1' --`
- **Impact**: Bypass authentication hoÃ n toÃ n

#### Rá»§i ro C: Plaintext Password Storage ğŸ”‘
- âŒ Máº­t kháº©u lÆ°u dáº¡ng plaintext (khÃ´ng hash)
- âŒ Vi pháº¡m nguyÃªn táº¯c báº£o máº­t cÆ¡ báº£n
- **Impact**: Database leak â†’ táº¥t cáº£ password bá»‹ lá»™

---

### ğŸ” 2. Lá»— Há»•ng TÃ¬m Kiáº¿m Sáº£n Pháº©m

**Chá»©c nÄƒng**: TÃ¬m kiáº¿m sáº£n pháº©m theo tÃªn/mÃ´ táº£  
**File**: `products.php`

#### SQL Injection (UNION-based) âš ï¸
- âŒ Tham sá»‘ `search` khÃ´ng Ä‘Æ°á»£c validate
- âŒ Concatenation trá»±c tiáº¿p vÃ o SQL query
- **Payload dump users**:
  ```
  %' UNION SELECT id,CONCAT('User: ',username),CONCAT('Pass: ',password),0,0,'leaked',email,phone,created_at FROM users#
  ```
- **Impact**: 
  - Lá»™ toÃ n bá»™ database (users, orders, products)
  - Lá»™ password plaintext
  - Lá»™ cáº¥u trÃºc database

---

### ğŸ“¦ 3. Lá»— Há»•ng Quáº£n LÃ½ ÄÆ¡n HÃ ng

**Chá»©c nÄƒng**: Xem chi tiáº¿t Ä‘Æ¡n hÃ ng  
**File**: `order_detail.php`

#### IDOR (Insecure Direct Object Reference) ğŸ¯
- âŒ KhÃ´ng kiá»ƒm tra quyá»n sá»Ÿ há»¯u Ä‘Æ¡n hÃ ng
- âŒ User cÃ³ thá»ƒ xem Ä‘Æ¡n cá»§a ngÆ°á»i khÃ¡c báº±ng cÃ¡ch Ä‘á»•i `id` trÃªn URL
- **Demo**: `order_detail.php?id=1` â†’ `order_detail.php?id=2`
- **Impact**:
  - Vi pháº¡m quyá»n riÃªng tÆ°
  - Lá»™ Ä‘á»‹a chá»‰, sá»‘ Ä‘iá»‡n thoáº¡i khÃ¡ch hÃ ng
  - Lá»™ thÃ³i quen mua hÃ ng

---

### ğŸ› ï¸ 4. Lá»— Há»•ng Quáº£n LÃ½ Sáº£n Pháº©m

**Chá»©c nÄƒng**: ThÃªm/sá»­a sáº£n pháº©m (Admin)  
**File**: `admin/products_manage.php`

#### Data Validation & Integrity Issues ğŸŸ¡
- âŒ KhÃ´ng validate giÃ¡ (cÃ³ thá»ƒ Ã¢m hoáº·c = 0)
- âŒ KhÃ´ng validate tá»“n kho (cÃ³ thá»ƒ Ã¢m)
- âŒ KhÃ´ng sanitize mÃ´ táº£ (XSS risk)
- âŒ SQL Injection trong admin panel
- **Impact**:
  - Thiá»‡t háº¡i tÃ i chÃ­nh (giÃ¡ Ã¢m/0)
  - Máº¥t uy tÃ­n (thÃ´ng tin sai lá»‡ch)
  - Khiáº¿u náº¡i, tráº£ hÃ ng
  - XSS â†’ Chiáº¿m quyá»n admin khÃ¡c

## ğŸ’» YÃªu Cáº§u Há»‡ Thá»‘ng

- **XAMPP** (hoáº·c tÆ°Æ¡ng Ä‘Æ°Æ¡ng):
  - PHP 7.4 trá»Ÿ lÃªn
  - MySQL 5.7 trá»Ÿ lÃªn
  - Apache Server
- **Browser**: Chrome, Firefox, hoáº·c Edge (phiÃªn báº£n má»›i nháº¥t)
- **Tools (tÃ¹y chá»n)**: 
  - Burp Suite Community Edition
  - SQLMap
  - Postman

## ğŸš€ CÃ i Äáº·t

### BÆ°á»›c 1: Clone Repository

```bash
git clone https://github.com/cupengus1/vulnerable-shop.git
cd vulnerable-shop
```

Hoáº·c táº£i trá»±c tiáº¿p vá» vÃ  giáº£i nÃ©n vÃ o thÆ° má»¥c:
```
C:\xampp\htdocs\vulnerable-shop\
```

### BÆ°á»›c 2: Import Database

1. Má»Ÿ XAMPP Control Panel vÃ  khá»Ÿi Ä‘á»™ng **Apache** vÃ  **MySQL**
2. Truy cáº­p phpMyAdmin: [http://localhost/phpmyadmin](http://localhost/phpmyadmin)
3. Táº¡o database má»›i cÃ³ tÃªn `shop_db`
4. Import file `database.sql`:
   - Click vÃ o database `shop_db`
   - Chá»n tab **Import**
   - Chá»n file `database.sql`
   - Click **Go**

### BÆ°á»›c 3: Cáº¥u HÃ¬nh Káº¿t Ná»‘i Database

Má»Ÿ file `config.php` vÃ  kiá»ƒm tra thÃ´ng tin káº¿t ná»‘i:

```php
<?php
define('DB_HOST', 'localhost');
define('DB_USER', 'root');
define('DB_PASS', '');  // Máº­t kháº©u MySQL (máº·c Ä‘á»‹nh lÃ  rá»—ng)
define('DB_NAME', 'shop_db');
?>
```

### BÆ°á»›c 4: Truy Cáº­p Website

Má»Ÿ trÃ¬nh duyá»‡t vÃ  truy cáº­p:
- **Trang chá»§**: [http://localhost/vulnerable-shop/](http://localhost/vulnerable-shop/)
- **Admin Panel**: [http://localhost/vulnerable-shop/admin/](http://localhost/vulnerable-shop/admin/)

## ğŸ“– HÆ°á»›ng Dáº«n Sá»­ Dá»¥ng 

## ğŸ“ Cáº¥u TrÃºc Dá»± Ãn

```
vulnerable-shop/
â”œâ”€â”€ admin/                      # Admin panel
â”‚   â”œâ”€â”€ index.php              # Admin dashboard
â”‚   â””â”€â”€ products_manage.php    # Quáº£n lÃ½ sáº£n pháº©m
â”œâ”€â”€ assets/                     # TÃ i nguyÃªn tÄ©nh
â”‚   â”œâ”€â”€ css/
â”‚   â”‚   â””â”€â”€ style.css         # Stylesheet chÃ­nh
â”‚   â”œâ”€â”€ js/
â”‚   â”‚   â””â”€â”€ main.js           # JavaScript
â”‚   â””â”€â”€ images/               # HÃ¬nh áº£nh sáº£n pháº©m
â”œâ”€â”€ includes/                   # CÃ¡c file dÃ¹ng chung
â”‚   â”œâ”€â”€ header.php            # Header template
â”‚   â””â”€â”€ footer.php            # Footer template
â”œâ”€â”€ config.php                  # Cáº¥u hÃ¬nh database
â”œâ”€â”€ database.sql               # Database schema vÃ  sample data
â”œâ”€â”€ index.php                  # Trang chá»§
â”œâ”€â”€ products.php               # Danh sÃ¡ch sáº£n pháº©m (ğŸ”“ SQL Injection)
â”œâ”€â”€ product_detail.php         # Chi tiáº¿t sáº£n pháº©m
â”œâ”€â”€ cart.php                   # Giá» hÃ ng
â”œâ”€â”€ checkout.php               # Thanh toÃ¡n
â”œâ”€â”€ orders.php                 # Lá»‹ch sá»­ Ä‘Æ¡n hÃ ng
â”œâ”€â”€ order_detail.php           # Chi tiáº¿t Ä‘Æ¡n hÃ ng (ğŸ”“ IDOR)
â”œâ”€â”€ login.php                  # ÄÄƒng nháº­p (ğŸ”“ Brute Force)
â”œâ”€â”€ register.php               # ÄÄƒng kÃ½
â”œâ”€â”€ logout.php                 # ÄÄƒng xuáº¥t
â”œâ”€â”€ test_sql.php               # Test SQL injection
â”œâ”€â”€ README.md                  # TÃ i liá»‡u nÃ y
â”œâ”€â”€ VULNERABILITIES.md         # Chi tiáº¿t lá»— há»•ng báº£o máº­t
â””â”€â”€ SECURITY_FIXES.md          # HÆ°á»›ng dáº«n kháº¯c phá»¥c lá»— há»•ng
```

## ğŸ¯ Demo Khai ThÃ¡c

### SQL Injection Example

**Payload 1**: Dump thÃ´ng tin users
```
http://localhost/vulnerable-shop/products.php?search=%' UNION SELECT id,CONCAT('User: ',username),CONCAT('Pass: ',password),0,0,'user-data',email,phone,created_at FROM users#
```

**Payload 2**: Bypass login
```sql
Username: admin' OR '1'='1
Password: anything
```

### IDOR Example

Thay Ä‘á»•i ID Ä‘Æ¡n hÃ ng Ä‘á»ƒ xem Ä‘Æ¡n cá»§a ngÆ°á»i khÃ¡c:
```
http://localhost/vulnerable-shop/order_detail.php?id=1
http://localhost/vulnerable-shop/order_detail.php?id=2  â† ÄÆ¡n hÃ ng cá»§a user khÃ¡c
```

### Brute Force Example

Sá»­ dá»¥ng Burp Suite Intruder:
1. Capture request Ä‘Äƒng nháº­p
2. Chá»n password field lÃ m payload position
3. Load wordlist (vÃ­ dá»¥: rockyou.txt)
4. Cháº¡y attack

## ğŸ›¡ï¸ Kháº¯c Phá»¥c Lá»— Há»•ng

Xem hÆ°á»›ng dáº«n chi tiáº¿t cÃ¡ch kháº¯c phá»¥c tá»«ng lá»— há»•ng táº¡i **[SECURITY_FIXES.md](SECURITY_FIXES.md)** vá»›i:

- âœ… Code before/after cho tá»«ng lá»— há»•ng
- âœ… Giáº£i thÃ­ch tá»«ng bÆ°á»›c
- âœ… Multiple phÆ°Æ¡ng phÃ¡p fix (basic â†’ advanced)
- âœ… Best practices vÃ  testing checklist

**Gá»£i Ã½ nhanh**:

1. **SQL Injection**: Sá»­ dá»¥ng Prepared Statements (PDO/MySQLi)
2. **Password Storage**: Hash vá»›i `password_hash()` vÃ  `password_verify()`
3. **Brute Force**: Implement rate limiting + CAPTCHA
4. **IDOR**: Kiá»ƒm tra quyá»n sá»Ÿ há»¯u tÃ i nguyÃªn
5. **Data Validation**: Validate & sanitize táº¥t cáº£ input

## ğŸ¤ ÄÃ³ng GÃ³p

Dá»± Ã¡n nÃ y phá»¥c vá»¥ má»¥c Ä‘Ã­ch giÃ¡o dá»¥c. Náº¿u báº¡n muá»‘n Ä‘Ã³ng gÃ³p:

1. Fork repository
2. Táº¡o branch má»›i: `git checkout -b feature/new-vulnerability`
3. Commit changes: `git commit -m 'Add new vulnerability: XXX'`
4. Push: `git push origin feature/new-vulnerability`
5. Táº¡o Pull Request

## âš–ï¸ License

Dá»± Ã¡n nÃ y Ä‘Æ°á»£c phÃ¢n phá»‘i dÆ°á»›i giáº¥y phÃ©p [MIT License](https://opensource.org/licenses/MIT).

## ğŸ“ LiÃªn Há»‡

- **GitHub**: [@cupengus1](https://github.com/cupengus1)
- **Repository**: [vulnerable-shop](https://github.com/cupengus1/vulnerable-shop)

---

### âš ï¸ DISCLAIMER

Dá»± Ã¡n nÃ y chá»‰ dÃ nh cho má»¥c Ä‘Ã­ch **há»c táº­p vÃ  nghiÃªn cá»©u** trong mÃ´i trÆ°á»ng **localhost**. KhÃ´ng sá»­ dá»¥ng cÃ¡c ká»¹ thuáº­t khai thÃ¡c trÃªn website thá»±c táº¿ mÃ  khÃ´ng cÃ³ sá»± cho phÃ©p. TÃ¡c giáº£ khÃ´ng chá»‹u trÃ¡ch nhiá»‡m vá» báº¥t ká»³ hÃ nh vi vi pháº¡m phÃ¡p luáº­t nÃ o.

**Sá»­ dá»¥ng cÃ³ trÃ¡ch nhiá»‡m! ğŸ™**
